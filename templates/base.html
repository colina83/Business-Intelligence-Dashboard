{% load static %}

<!DOCTYPE html>

<html lang="en" data-color-mode="light">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}TGS Dashboard{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <style>

        :root {

            --gh-header-bg: #24292f;

            --gh-header-text: #ffffff;

            --gh-sidebar-bg: #f6f8fa;

            --gh-sidebar-border: #d0d7de;

            --gh-content-bg: #ffffff;

            --gh-border-default: #d0d7de;

            --gh-text-primary: #1f2328;

            --gh-text-secondary: #656d76;

            --gh-accent: #0969da;

            --gh-accent-emphasis: #0550ae;

            --gh-success: #1a7f37;

            --gh-danger: #cf222e;

            --gh-warning: #9a6700;

            --sidebar-width: 240px;

        }

        

        * {

            box-sizing: border-box;

        }

        

        body {

            min-height: 100vh;

            margin: 0;

            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif;

            font-size: 14px;

            line-height: 1.5;

            color: var(--gh-text-primary);

            background-color: #f6f8fa;

        }

        

        /* GitHub-style Header */

        .gh-header {

            position: fixed;

            top: 0;

            left: 0;

            right: 0;

            height: 62px;

            background: var(--gh-header-bg);

            color: var(--gh-header-text);

            display: flex;

            align-items: center;

            padding: 0 16px;

            z-index: 1000;

            box-shadow: 0 1px 3px rgba(0,0,0,0.12);

        }

        

        .gh-header-logo {

            display: flex;

            align-items: center;

            gap: 12px;

            text-decoration: none;

            color: var(--gh-header-text);

            margin-right: 16px;

        }

        

        .gh-header-logo img {

            height: 32px;

            width: auto;

        }

        

        .gh-header-nav {

            display: flex;

            align-items: center;

            margin-left: auto;

            gap: 8px;

        }

        

        .gh-header-nav-item {

            color: var(--gh-header-text);

            text-decoration: none;

            padding: 6px 12px;

            border-radius: 6px;

            font-size: 14px;

            font-weight: 500;

            display: flex;

            align-items: center;

            gap: 6px;

            transition: background-color 0.15s ease;

        }

        

        .gh-header-nav-item:hover {

            background-color: rgba(255,255,255,0.1);

            color: var(--gh-header-text);

        }

        

        .gh-header-user {

            display: flex;

            align-items: center;

            gap: 8px;

            color: var(--gh-header-text);

            padding: 6px 12px;

        }

        

        .gh-btn-logout {

            background: transparent;

            border: 1px solid rgba(255,255,255,0.3);

            color: var(--gh-header-text);

            padding: 5px 12px;

            border-radius: 6px;

            font-size: 13px;

            font-weight: 500;

            text-decoration: none;

            transition: all 0.15s ease;

        }

        

        .gh-btn-logout:hover {

            background: rgba(255,255,255,0.1);

            border-color: rgba(255,255,255,0.5);

            color: var(--gh-header-text);

        }

        

        /* Sidebar */

        .gh-sidebar {

            position: fixed;

            top: 62px;

            left: 0;

            width: var(--sidebar-width);

            height: calc(100vh - 62px);

            background: var(--gh-sidebar-bg);

            border-right: 1px solid var(--gh-sidebar-border);

            overflow-y: auto;

            z-index: 100;

        }

        

        .gh-sidebar-nav {

            padding: 16px 12px;

        }

        

        .gh-sidebar-nav-item {

            display: flex;

            align-items: center;

            gap: 10px;

            padding: 8px 12px;

            margin-bottom: 2px;

            color: var(--gh-text-primary);

            text-decoration: none;

            border-radius: 6px;

            font-size: 14px;

            font-weight: 500;

            transition: background-color 0.15s ease;

        }

        

        .gh-sidebar-nav-item:hover {

            background-color: rgba(208, 215, 222, 0.5);

            color: var(--gh-text-primary);

        }

        

        .gh-sidebar-nav-item.active {

            background-color: rgba(9, 105, 218, 0.1);

            color: var(--gh-accent);

        }

        

        .gh-sidebar-nav-item i {

            font-size: 16px;

            width: 20px;

            text-align: center;

        }

        

        .gh-sidebar-section {

            padding: 12px;

            border-top: 1px solid var(--gh-sidebar-border);

            margin-top: 8px;

        }

        

        .gh-sidebar-section-title {

            font-size: 12px;

            font-weight: 600;

            color: var(--gh-text-secondary);

            text-transform: uppercase;

            padding: 0 12px;

            margin-bottom: 8px;

        }

        
        /* Expandable menu styles */

        .gh-sidebar-nav-parent {

            display: flex;

            align-items: center;

            gap: 10px;

            padding: 8px 12px;

            margin-bottom: 2px;

            color: var(--gh-text-primary);

            text-decoration: none;

            border-radius: 6px;

            font-size: 14px;

            font-weight: 600;

            transition: background-color 0.15s ease;

            cursor: pointer;

            user-select: none;

        }

        

        .gh-sidebar-nav-parent:hover {

            background-color: rgba(208, 215, 222, 0.5);

            color: var(--gh-text-primary);

        }

        

        .gh-sidebar-nav-parent i.menu-icon {

            font-size: 16px;

            width: 20px;

            text-align: center;

        }

        

        .gh-sidebar-nav-parent .expand-icon {

            margin-left: auto;

            font-size: 12px;

            transition: transform 0.2s ease;

        }

        

        .gh-sidebar-nav-parent.expanded .expand-icon {

            transform: rotate(90deg);

        }

        

        .gh-sidebar-submenu {

            max-height: 0;

            overflow: hidden;

            transition: max-height 0.3s ease;

            padding-left: 16px;

        }

        

        .gh-sidebar-submenu.expanded {

            max-height: 500px;

        }

        

        .gh-sidebar-submenu .gh-sidebar-nav-item {

            font-size: 13px;

            padding: 6px 12px;

        }

        

        .gh-sidebar-submenu .gh-sidebar-nav-item i {

            font-size: 14px;

        }

        

        /* Main content */

        .gh-main {

            margin-left: var(--sidebar-width);

            margin-top: 62px;

            min-height: calc(100vh - 62px);

            padding: 24px;

            background: #f6f8fa;

        }

        

        .gh-container {

            max-width: 1400px;

            margin: 0 auto;

        }

        

        /* GitHub-style alerts */

        .gh-alert {

            padding: 12px 16px;

            border-radius: 6px;

            margin-bottom: 16px;

            border: 1px solid;

            display: flex;

            align-items: center;

            gap: 8px;

        }

        

        .gh-alert-success {

            background-color: #dafbe1;

            border-color: #aceebb;

            color: var(--gh-success);

        }

        

        .gh-alert-error {

            background-color: #ffebe9;

            border-color: #ffcecb;

            color: var(--gh-danger);

        }

        

        .gh-alert-warning {

            background-color: #fff8c5;

            border-color: #f5e0a6;

            color: var(--gh-warning);

        }

        

        .gh-alert-close {

            margin-left: auto;

            background: none;

            border: none;

            cursor: pointer;

            padding: 4px;

            opacity: 0.7;

        }

        

        .gh-alert-close:hover {

            opacity: 1;

        }

        

        /* Card hover effect */

        .card-hover {

            transition: transform 0.2s, box-shadow 0.2s;

        }

        .card-hover:hover {

            transform: translateY(-2px);

            box-shadow: 0 4px 12px rgba(0,0,0,0.1);

        }

        

        /* Footer styling */

        .gh-footer {

            text-align: center;

            padding: 16px;

            color: var(--gh-text-secondary);

            font-size: 12px;

            border-top: 1px solid var(--gh-border-default);

            background: var(--gh-content-bg);

            margin-top: 24px;

        }

        

        /* Responsive */

        @media (max-width: 768px) {

            .gh-sidebar {

                transform: translateX(-100%);

                transition: transform 0.3s ease;

            }

            .gh-sidebar.show {

                transform: translateX(0);

            }

            .gh-main {

                margin-left: 0;

            }

        }

    </style>

    {% block extra_css %}{% endblock %}

</head>

<body>

    <!-- GitHub-style Header -->

    <header class="gh-header">

        <a href="{% url 'market_analysis:dashboard' %}" class="gh-header-logo">

            <img src="{% static 'market_analysis/img/tgs_logo.png' %}" alt="TGS Logo">

        </a>

        

        <nav class="gh-header-nav">

            {% if user.is_authenticated %}

                <a href="{% url 'market_analysis:dashboard' %}" class="gh-header-nav-item">

                    <i class="bi bi-globe-americas"></i>

                    Market Dashboard

                </a>

                <span class="gh-header-user">

                    <i class="bi bi-person-circle"></i>

                    {{ user.username }}

                </span>

                <a href="{% url 'accounts:logout' %}" class="gh-btn-logout">

                    <i class="bi bi-box-arrow-right"></i>

                    Logout

                </a>

            {% else %}

                <a href="{% url 'accounts:login' %}" class="gh-header-nav-item">

                    <i class="bi bi-box-arrow-in-right"></i>

                    Login

                </a>

                <a href="{% url 'accounts:register' %}" class="gh-btn-logout">

                    <i class="bi bi-person-plus"></i>

                    Register

                </a>

            {% endif %}

        </nav>

    </header>



    <!-- Sidebar -->

    {% if user.is_authenticated %}

    <aside class="gh-sidebar">

        <nav class="gh-sidebar-nav">

            <!-- Market Dashboard Parent Menu -->

            <div class="gh-sidebar-nav-parent expanded" onclick="toggleSubmenu(this)" onkeydown="handleMenuKeydown(event, this)" tabindex="0" role="button" aria-expanded="true">

                <i class="bi bi-globe-americas menu-icon"></i>

                Market Dashboard

                <i class="bi bi-chevron-right expand-icon"></i>

            </div>

            <div class="gh-sidebar-submenu expanded">

                <a href="{% url 'market_analysis:project_opportunities' %}" class="gh-sidebar-nav-item">

                    <i class="bi bi-lightbulb"></i>

                    Project Opportunities

                </a>

                <a href="#" class="gh-sidebar-nav-item">

                    <i class="bi bi-graph-up-arrow"></i>

                    Pricing Analytics

                </a>

                <a href="#" class="gh-sidebar-nav-item">

                    <i class="bi bi-bar-chart-line"></i>

                    Pricing Graphs

                </a>

                <a href="#" class="gh-sidebar-nav-item">

                    <i class="bi bi-clock-history"></i>

                    Tendering Cycle Time

                </a>

                <a href="#" class="gh-sidebar-nav-item">

                    <i class="bi bi-robot"></i>

                    MarketAgent AI

                </a>

            </div>

        </nav>

        

        <div class="gh-sidebar-section">

            <div class="gh-sidebar-section-title">Quick Actions</div>

            <a href="{% url 'market_analysis:project_add' %}" class="gh-sidebar-nav-item">

                <i class="bi bi-plus-circle"></i>

                New Project

            </a>

            <a href="/admin/" class="gh-sidebar-nav-item">

                <i class="bi bi-gear"></i>

                Admin Panel

            </a>

        </div>

    </aside>

    {% endif %}



    <!-- Main Content -->

    <main class="gh-main">

        <div class="gh-container">

            {% if messages %}

                {% for message in messages %}

                    <div class="gh-alert gh-alert-{{ message.tags }}" role="alert">

                        <i class="bi bi-{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}exclamation-circle{% elif message.tags == 'warning' %}exclamation-triangle{% else %}info-circle{% endif %}"></i>

                        {{ message }}

                        <button type="button" class="gh-alert-close" onclick="this.parentElement.remove()">

                            <i class="bi bi-x-lg"></i>

                        </button>

                    </div>

                {% endfor %}

            {% endif %}



            {% block content %}

            {% endblock %}

        </div>

        

        {# optional footer block â€“ empty by default (removed globally). Override in a page if needed. #}

        {% block footer %}{% endblock %}



    </main>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>

        // Toggle submenu expand/collapse

        function toggleSubmenu(parentElement) {

            const submenu = parentElement.nextElementSibling;

            const isExpanded = parentElement.classList.toggle('expanded');

            submenu.classList.toggle('expanded');

            parentElement.setAttribute('aria-expanded', isExpanded);

        }

        

        // Handle keyboard navigation for submenu

        function handleMenuKeydown(event, parentElement) {

            if (event.key === 'Enter' || event.key === ' ') {

                event.preventDefault();

                toggleSubmenu(parentElement);

            }

        }

    </script>

    {% block extra_js %}{% endblock %}

</body>

</html>

